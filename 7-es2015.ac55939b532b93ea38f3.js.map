{"version":3,"sources":["webpack:///src/app/devices/scheduler/scheduler.routing.ts","webpack:///src/app/devices/scheduler/scheduler.component.ts","webpack:///src/app/devices/scheduler/scheduler.component.html","webpack:///node_modules/@fullcalendar/daygrid/main.css","webpack:///node_modules/@fullcalendar/daygrid/main.js","webpack:///src/app/devices/scheduler/scheduler.module.ts"],"names":["routing","forChild","path","component","SchedulerComponent","route","service","calendarOptions","initialView","deviceId","this","parent","snapshot","paramMap","get","scheduler","subscribe","result","console","log","_super","TableView","_this","apply","arguments","headerElRef","prototype","renderSimpleLayout","headerRowContent","bodyContent","props","context","sections","stickyHeaderDates","options","push","type","key","isSticky","chunk","elRef","tableClassName","rowContent","liquid","content","viewSpec","rootElRef","classNames","ref","className","concat","join","isHeightAuto","forPrint","cols","renderHScrollLayout","colCnt","dayMinWidth","ScrollGrid","pluginHooks","scrollGridImpl","Error","stickyFooterScrollbar","chunks","colGroups","span","minWidth","splitSegsByRow","segs","rowCnt","byRow","i","_i","segs_1","length","seg","row","splitSegsByFirstCol","byCol","segs_2","firstCol","splitInteractionByRow","ui","affectedInstances","isEvent","_a","TableCellTop","render","navLinkAttrs","navLinks","date","tabIndex","dateProfile","todayRange","showDayNumber","extraHookProps","defaultContent","renderTopInner","innerElRef","innerContent","forceDayTop","dayNumberText","DEFAULT_WEEK_NUM_FORMAT","week","TableCell","handleRootEl","el","rootEl","handleMoreLinkClick","ev","onMoreClick","allSegs","segsByEachCol","hiddenSegs","filter","segIsHidden","eventRange","instance","instanceId","moreCnt","dayEl","viewApi","hookProps","num","text","buildMoreLinkText","view","dayElRef","dayClassNames","rootDataAttrs","isDisabled","extraClassNames","extraDataAttrs","showWeekNumber","defaultFormat","weekElRef","weekClassNames","fgContentElRef","style","paddingBottom","fgPaddingBottom","fgContent","Boolean","marginTop","moreMarginTop","moreLinkClassNames","moreLinkContent","renderMoreLinkInner","didMount","moreLinkDidMount","willUnmount","moreLinkWillUnmount","onClick","bgContent","addPropsEquality","DEFAULT_TABLE_EVENT_TIME_FORMAT","hour","minute","omitZeroMinute","meridiem","hasListItemDisplay","display","def","allDay","lastCol","isStart","isEnd","TableListItemEvent","timeFormat","eventTimeFormat","timeText","defaultDisplayEventEnd","renderInnerContent","isDragging","isResizing","isDateSelecting","isSelected","isPast","isFuture","isToday","url","href","innerProps","borderColor","backgroundColor","event","title","TableBlockEvent","defaultTimeFormat","disableResizing","extractFirstColSegs","oneColPlacements","col","oneColPlacements_1","placement","limitEvents","hiddenCnts","colPlacements","_moreLinkConsumesLevel","isPlacementInBounds","segIsVisible","visibleColPlacements","level","placements_2","recordVisible","recordHidden","top","bottom","destPlacements","newPosition","splice","currentLevel","moreLinkConsumesLevel","doomedLevel","pop","TableRow","cellElRefs","frameElRefs","fgElRefs","segHarnessRefs","state","framePositions","maxContentHeight","segHeights","cells","businessHoursByCol","businessHourSegs","bgEventSegsByCol","bgEventSegs","highlightSegsByCol","getHighlightSegs","mirrorSegsByCol","getMirrorSegs","_b","cellModels","dayMaxEvents","dayMaxEventRows","eventHeights","eventOrderSpecs","moreCnts","segTops","segMarginTops","moreTops","paddingBottoms","placeSeg","levelIndex","currentNonAbsBottom","currentAbsHeight","placements_1","segHeight","tryPlaceSegAt","placements","insertionIndex","instanceIdAndFirstCol","split","segsByFirstCol","map","dayDate","colIndex","dayStart","dayRange","start","end","newSegs","origRange","range","slicedRange","durationEditable","valueOf","oneColPlacements_2","fgEventSegs","eventOrder","selectedInstanceHash","eventDrag","eventResize","renderIntro","cell","normalFgNodes","renderFgSegs","mirrorFgNodes","createRef","showDayNumbers","showWeekNumbers","arg","fromCol","renderFillSegs","componentDidMount","updateSizing","componentDidUpdate","prevProps","prevState","currentProps","dateSelectionSegs","eventSelection","nodes","isMirror","isInvisible","isAbsolute","top_1","left","right","isRtl","lefts","rights","visibility","fillType","leftRightCss","isExternalSizingChange","clientWidth","frameEls","currentMap","setState","current","limitByContentHeight","computeSegHeights","computeMaxContentHeight","eventHarnessEl","getBoundingClientRect","firstKey","fcContainerEl","getCellEls","elMap","addStateEquality","Popover","repositioner","updateSize","bind","handleDocumentMousedown","onClose","contains","target","handleDocumentScroll","request","handleCloseClick","theme","getClass","extraAttrs","getIconClass","children","document","addEventListener","componentWillUnmount","removeEventListener","alignmentEl","topAlignmentEl","dims","alignment","Math","min","window","innerHeight","height","max","width","innerWidth","MorePopover","hiddenInstances","selectedInstanceId","dateEnv","format","dayPopoverFormat","dataAttrs","onCloseClick","positionToHit","positionLeft","positionTop","originEl","originRect","elRect","newOriginLeft","newOriginTop","localLeft","localTop","dateSpan","relativeRect","layer","Table","splitBusinessHourSegs","splitBgEventSegs","splitFgEventSegs","splitDateSelectionSegs","splitEventDrag","splitEventResize","buildBuildMoreLinkText","morePopoverRef","rowRefs","morePopoverState","clickOption","moreLinkClick","segForPublic","toDate","jsEvent","calendarApi","zoomTo","currentFgEventSegs","fromRow","handleMorePopoverClose","expandRows","businessHourSegsByRow","bgEventSegsByRow","fgEventSegsByRow","dateSelectionSegsByRow","eventDragByRow","eventResizeByRow","moreLinkText","limitViaBalanced","tableMinWidth","unit","nowDate","clientHeight","colGroupNode","toISOString","renderRowIntro","isSegAllDay","headerAlignElRef","prepareHits","rowPositions","collect","rowObj","colPositions","leftPosition","topPosition","morePopover","morePopoverHit","leftToIndex","topToIndex","getCellRange","getCellEl","tops","bottoms","moreLinkTextInput","DayTableSlicer","forceDayIfListItem","sliceRange","dateRange","dayTableModel","DayTable","slicer","tableRef","registerInteractiveComponent","unregisterInteractiveComponent","sliceProps","nextDayThreshold","queryHit","rawHit","rect","DayTableView","buildDayTableModel","headerRef","dateProfileGenerator","headerContent","dayHeaders","dates","headerDates","datesRepDistinctDays","contentArg","businessHours","dateSelection","eventStore","eventUiBases","tableColGroupNode","weekNumbers","daySeries","renderRange","test","currentRangeUnit","TableDateProfileGenerator","buildRenderRange","currentRange","isRangeAllDay","endOfWeek","call","startOfWeek","monthMode","fixedWeekCount","ceil","OPTION_REFINERS","optionRefiners","views","dayGrid","dateProfileGeneratorClass","dayGridDay","duration","days","dayGridWeek","weeks","dayGridMonth","months","registerPlugins","SchedulerModule"],"mappings":"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","file":"x","sourcesContent":["import { RouterModule, Routes } from '@angular/router';\nimport { SchedulerComponent } from './scheduler.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SchedulerComponent,\n  },\n];\n\nexport const routing = RouterModule.forChild(routes);\n","import { Component, OnInit } from '@angular/core';\nimport { DevicesService } from '../devices.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { Scheduler } from './scheduler';\n\n@Component({\n  selector: 'app-scheduler',\n  templateUrl: './scheduler.component.html',\n  styleUrls: ['./scheduler.component.sass']\n})\nexport class SchedulerComponent implements OnInit {\n\n  result: Scheduler;\n\n  calendarOptions = {\n    initialView: 'dayGridWeek'\n  };\n\n  constructor(private route: ActivatedRoute,\n              private service: DevicesService) {\n  }\n\n  ngOnInit(): void {\n    const deviceId = this.route.parent.snapshot.paramMap.get('deviceId');\n\n    this.service.scheduler(deviceId).subscribe((result: Scheduler) => {\n      console.log(result);\n      this.result = result;\n    });\n  }\n\n}\n","{{(result?.updated_at) * 1000 | date: 'dd/MM/yyyy HH:mm:ss'}}\n\n{{result?.attr.mode}}\n{{result?.attr.time_week}}\n\n<full-calendar [options]=\"calendarOptions\"></full-calendar>\n","export default \"\\n:root {\\n  --fc-daygrid-event-dot-width: 8px;\\n}\\n.fc .fc-popover {\\n    position: fixed;\\n    top: 0; /* for when not positioned yet */\\n    box-shadow: 0 2px 6px rgba(0,0,0,.15);\\n  }\\n.fc .fc-popover-header {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: space-between;\\n    align-items: center;\\n    padding: 3px 4px;\\n  }\\n.fc .fc-popover-title {\\n    margin: 0 2px;\\n  }\\n.fc .fc-popover-close {\\n    cursor: pointer;\\n    opacity: 0.65;\\n    font-size: 1.1em;\\n  }\\n.fc-theme-standard .fc-popover {\\n    border: 1px solid #ddd;\\n    border: 1px solid var(--fc-border-color, #ddd);\\n    background: #fff;\\n    background: var(--fc-page-bg-color, #fff);\\n  }\\n.fc-theme-standard .fc-popover-header {\\n    background: rgba(208, 208, 208, 0.3);\\n    background: var(--fc-neutral-bg-color, rgba(208, 208, 208, 0.3));\\n  }\\n/* help things clear margins of inner content */\\n.fc-daygrid-day-frame,\\n.fc-daygrid-day-events,\\n.fc-daygrid-event-harness { /* for event top/bottom margins */\\n}\\n.fc-daygrid-day-frame:before, .fc-daygrid-day-events:before, .fc-daygrid-event-harness:before {\\n  content: \\\"\\\";\\n  clear: both;\\n  display: table; }\\n.fc-daygrid-day-frame:after, .fc-daygrid-day-events:after, .fc-daygrid-event-harness:after {\\n  content: \\\"\\\";\\n  clear: both;\\n  display: table; }\\n.fc .fc-daygrid-body { /* a <div> that wraps the table */\\n    position: relative;\\n    z-index: 1; /* container inner z-index's because <tr>s can't do it */\\n  }\\n.fc .fc-daygrid-day.fc-day-today {\\n      background-color: rgba(255, 220, 40, 0.15);\\n      background-color: var(--fc-today-bg-color, rgba(255, 220, 40, 0.15));\\n    }\\n.fc .fc-daygrid-day-frame {\\n    position: relative;\\n    min-height: 100%; /* seems to work better than `height` because sets height after rows/cells naturally do it */\\n  }\\n.fc {\\n\\n  /* cell top */\\n\\n}\\n.fc .fc-daygrid-day-top {\\n    display: flex;\\n    flex-direction: row-reverse;\\n  }\\n.fc .fc-day-other .fc-daygrid-day-top {\\n    opacity: 0.3;\\n  }\\n.fc {\\n\\n  /* day number (within cell top) */\\n\\n}\\n.fc .fc-daygrid-day-number {\\n    position: relative;\\n    z-index: 4;\\n    padding: 4px;\\n  }\\n.fc {\\n\\n  /* event container */\\n\\n}\\n.fc .fc-daygrid-day-events {\\n    margin-top: 1px; /* needs to be margin, not padding, so that available cell height can be computed */\\n  }\\n.fc {\\n\\n  /* positioning for balanced vs natural */\\n\\n}\\n.fc .fc-daygrid-body-balanced .fc-daygrid-day-events {\\n      position: absolute;\\n      left: 0;\\n      right: 0;\\n    }\\n.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events {\\n      position: relative; /* for containing abs positioned event harnesses */\\n      min-height: 2em; /* in addition to being a min-height during natural height, equalizes the heights a little bit */\\n    }\\n.fc .fc-daygrid-body-natural { /* can coexist with -unbalanced */\\n  }\\n.fc .fc-daygrid-body-natural .fc-daygrid-day-events {\\n      margin-bottom: 1em;\\n    }\\n.fc {\\n\\n  /* event harness */\\n\\n}\\n.fc .fc-daygrid-event-harness {\\n    position: relative;\\n  }\\n.fc .fc-daygrid-event-harness-abs {\\n    position: absolute;\\n    top: 0; /* fallback coords for when cannot yet be computed */\\n    left: 0; /* */\\n    right: 0; /* */\\n  }\\n.fc .fc-daygrid-bg-harness {\\n    position: absolute;\\n    top: 0;\\n    bottom: 0;\\n  }\\n.fc {\\n\\n  /* bg content */\\n\\n}\\n.fc .fc-daygrid-day-bg .fc-non-business { z-index: 1 }\\n.fc .fc-daygrid-day-bg .fc-bg-event { z-index: 2 }\\n.fc .fc-daygrid-day-bg .fc-highlight { z-index: 3 }\\n.fc {\\n\\n  /* events */\\n\\n}\\n.fc .fc-daygrid-event {\\n    z-index: 6;\\n    margin-top: 1px;\\n  }\\n.fc .fc-daygrid-event.fc-event-mirror {\\n    z-index: 7;\\n  }\\n.fc {\\n\\n  /* cell bottom (within day-events) */\\n\\n}\\n.fc .fc-daygrid-day-bottom {\\n    font-size: .85em;\\n    margin: 2px 3px 0;\\n  }\\n.fc .fc-daygrid-more-link {\\n    position: relative;\\n    z-index: 4;\\n    cursor: pointer;\\n  }\\n.fc {\\n\\n  /* week number (within frame) */\\n\\n}\\n.fc .fc-daygrid-week-number {\\n    position: absolute;\\n    z-index: 5;\\n    top: 0;\\n    padding: 2px;\\n    min-width: 1.5em;\\n    text-align: center;\\n    background-color: rgba(208, 208, 208, 0.3);\\n    background-color: var(--fc-neutral-bg-color, rgba(208, 208, 208, 0.3));\\n    color: #808080;\\n    color: var(--fc-neutral-text-color, #808080);\\n  }\\n.fc {\\n\\n  /* popover */\\n\\n}\\n.fc .fc-more-popover {\\n    z-index: 8;\\n  }\\n.fc .fc-more-popover .fc-popover-body {\\n    min-width: 220px;\\n    padding: 10px;\\n  }\\n.fc-direction-ltr .fc-daygrid-event.fc-event-start,\\n.fc-direction-rtl .fc-daygrid-event.fc-event-end {\\n  margin-left: 2px;\\n}\\n.fc-direction-ltr .fc-daygrid-event.fc-event-end,\\n.fc-direction-rtl .fc-daygrid-event.fc-event-start {\\n  margin-right: 2px;\\n}\\n.fc-direction-ltr .fc-daygrid-week-number {\\n    left: 0;\\n    border-radius: 0 0 3px 0;\\n  }\\n.fc-direction-rtl .fc-daygrid-week-number {\\n    right: 0;\\n    border-radius: 0 0 0 3px;\\n  }\\n.fc-liquid-hack .fc-daygrid-day-frame {\\n    position: static; /* will cause inner absolute stuff to expand to <td> */\\n  }\\n.fc-daygrid-event { /* make root-level, because will be dragged-and-dropped outside of a component root */\\n  position: relative; /* for z-indexes assigned later */\\n  white-space: nowrap;\\n  border-radius: 3px; /* dot event needs this to when selected */\\n  font-size: .85em;\\n  font-size: var(--fc-small-font-size, .85em);\\n}\\n/* --- the rectangle (\\\"block\\\") style of event --- */\\n.fc-daygrid-block-event .fc-event-time {\\n    font-weight: bold;\\n  }\\n.fc-daygrid-block-event .fc-event-time,\\n  .fc-daygrid-block-event .fc-event-title {\\n    padding: 1px;\\n  }\\n/* --- the dot style of event --- */\\n.fc-daygrid-dot-event {\\n  display: flex;\\n  align-items: center;\\n  padding: 2px 0\\n\\n}\\n.fc-daygrid-dot-event .fc-event-title {\\n    flex-grow: 1;\\n    flex-shrink: 1;\\n    min-width: 0; /* important for allowing to shrink all the way */\\n    overflow: hidden;\\n    font-weight: bold;\\n  }\\n.fc-daygrid-dot-event:hover,\\n  .fc-daygrid-dot-event.fc-event-mirror {\\n    background: rgba(0, 0, 0, 0.1);\\n  }\\n.fc-daygrid-dot-event.fc-event-selected:before {\\n    /* expand hit area */\\n    top: -10px;\\n    bottom: -10px;\\n  }\\n.fc-daygrid-event-dot { /* the actual dot */\\n  margin: 0 4px;\\n  box-sizing: content-box;\\n  width: 0;\\n  height: 0;\\n  border: 4px solid #3788d8;\\n  border: calc(var(--fc-daygrid-event-dot-width, 8px) / 2) solid var(--fc-event-border-color, #3788d8);\\n  border-radius: 4px;\\n  border-radius: calc(var(--fc-daygrid-event-dot-width, 8px) / 2);\\n}\\n/* --- spacing between time and title --- */\\n.fc-direction-ltr .fc-daygrid-event .fc-event-time {\\n    margin-right: 3px;\\n  }\\n.fc-direction-rtl .fc-daygrid-event .fc-event-time {\\n    margin-left: 3px;\\n  }\\n\";","/*!\nFullCalendar v5.5.0\nDocs & License: https://fullcalendar.io/\n(c) 2020 Adam Shaw\n*/\nimport './main.css';\n\nimport { createRef, getStickyHeaderDates, createElement, ViewRoot, SimpleScrollGrid, getStickyFooterScrollbar, DateComponent, renderScrollShim, buildNavLinkData, DayCellContent, Fragment, BaseComponent, createFormatter, setRef, DayCellRoot, WeekNumberRoot, RenderHook, buildSegTimeText, EventRoot, StandardEvent, sortEventSegs, addDays, intersectRanges, RefMap, isPropsEqual, getSegMeta, buildEventRangeKey, BgEvent, renderFill, PositionCache, mapHash, DelayedRunner, applyStyle, memoize, NowTimer, EventApi, Slicer, DayHeader, DaySeriesModel, DayTableModel, addWeeks, diffWeeks, DateProfileGenerator, identity, createPlugin } from '@fullcalendar/common';\nimport { __extends, __assign, __spreadArrays } from 'tslib';\n\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a Table subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\nvar TableView = /** @class */ (function (_super) {\n    __extends(TableView, _super);\n    function TableView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.headerElRef = createRef();\n        return _this;\n    }\n    TableView.prototype.renderSimpleLayout = function (headerRowContent, bodyContent) {\n        var _a = this, props = _a.props, context = _a.context;\n        var sections = [];\n        var stickyHeaderDates = getStickyHeaderDates(context.options);\n        if (headerRowContent) {\n            sections.push({\n                type: 'header',\n                key: 'header',\n                isSticky: stickyHeaderDates,\n                chunk: {\n                    elRef: this.headerElRef,\n                    tableClassName: 'fc-col-header',\n                    rowContent: headerRowContent,\n                },\n            });\n        }\n        sections.push({\n            type: 'body',\n            key: 'body',\n            liquid: true,\n            chunk: { content: bodyContent },\n        });\n        return (createElement(ViewRoot, { viewSpec: context.viewSpec }, function (rootElRef, classNames) { return (createElement(\"div\", { ref: rootElRef, className: ['fc-daygrid'].concat(classNames).join(' ') },\n            createElement(SimpleScrollGrid, { liquid: !props.isHeightAuto && !props.forPrint, cols: [] /* TODO: make optional? */, sections: sections }))); }));\n    };\n    TableView.prototype.renderHScrollLayout = function (headerRowContent, bodyContent, colCnt, dayMinWidth) {\n        var ScrollGrid = this.context.pluginHooks.scrollGridImpl;\n        if (!ScrollGrid) {\n            throw new Error('No ScrollGrid implementation');\n        }\n        var _a = this, props = _a.props, context = _a.context;\n        var stickyHeaderDates = !props.forPrint && getStickyHeaderDates(context.options);\n        var stickyFooterScrollbar = !props.forPrint && getStickyFooterScrollbar(context.options);\n        var sections = [];\n        if (headerRowContent) {\n            sections.push({\n                type: 'header',\n                key: 'header',\n                isSticky: stickyHeaderDates,\n                chunks: [{\n                        key: 'main',\n                        elRef: this.headerElRef,\n                        tableClassName: 'fc-col-header',\n                        rowContent: headerRowContent,\n                    }],\n            });\n        }\n        sections.push({\n            type: 'body',\n            key: 'body',\n            liquid: true,\n            chunks: [{\n                    key: 'main',\n                    content: bodyContent,\n                }],\n        });\n        if (stickyFooterScrollbar) {\n            sections.push({\n                type: 'footer',\n                key: 'footer',\n                isSticky: true,\n                chunks: [{\n                        key: 'main',\n                        content: renderScrollShim,\n                    }],\n            });\n        }\n        return (createElement(ViewRoot, { viewSpec: context.viewSpec }, function (rootElRef, classNames) { return (createElement(\"div\", { ref: rootElRef, className: ['fc-daygrid'].concat(classNames).join(' ') },\n            createElement(ScrollGrid, { liquid: !props.isHeightAuto && !props.forPrint, colGroups: [{ cols: [{ span: colCnt, minWidth: dayMinWidth }] }], sections: sections }))); }));\n    };\n    return TableView;\n}(DateComponent));\n\nfunction splitSegsByRow(segs, rowCnt) {\n    var byRow = [];\n    for (var i = 0; i < rowCnt; i += 1) {\n        byRow[i] = [];\n    }\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        byRow[seg.row].push(seg);\n    }\n    return byRow;\n}\nfunction splitSegsByFirstCol(segs, colCnt) {\n    var byCol = [];\n    for (var i = 0; i < colCnt; i += 1) {\n        byCol[i] = [];\n    }\n    for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n        var seg = segs_2[_i];\n        byCol[seg.firstCol].push(seg);\n    }\n    return byCol;\n}\nfunction splitInteractionByRow(ui, rowCnt) {\n    var byRow = [];\n    if (!ui) {\n        for (var i = 0; i < rowCnt; i += 1) {\n            byRow[i] = null;\n        }\n    }\n    else {\n        for (var i = 0; i < rowCnt; i += 1) {\n            byRow[i] = {\n                affectedInstances: ui.affectedInstances,\n                isEvent: ui.isEvent,\n                segs: [],\n            };\n        }\n        for (var _i = 0, _a = ui.segs; _i < _a.length; _i++) {\n            var seg = _a[_i];\n            byRow[seg.row].segs.push(seg);\n        }\n    }\n    return byRow;\n}\n\nvar TableCellTop = /** @class */ (function (_super) {\n    __extends(TableCellTop, _super);\n    function TableCellTop() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableCellTop.prototype.render = function () {\n        var props = this.props;\n        var navLinkAttrs = this.context.options.navLinks\n            ? { 'data-navlink': buildNavLinkData(props.date), tabIndex: 0 }\n            : {};\n        return (createElement(DayCellContent, { date: props.date, dateProfile: props.dateProfile, todayRange: props.todayRange, showDayNumber: props.showDayNumber, extraHookProps: props.extraHookProps, defaultContent: renderTopInner }, function (innerElRef, innerContent) { return ((innerContent || props.forceDayTop) && (createElement(\"div\", { className: \"fc-daygrid-day-top\", ref: innerElRef },\n            createElement(\"a\", __assign({ className: \"fc-daygrid-day-number\" }, navLinkAttrs), innerContent || createElement(Fragment, null, \"\\u00A0\"))))); }));\n    };\n    return TableCellTop;\n}(BaseComponent));\nfunction renderTopInner(props) {\n    return props.dayNumberText;\n}\n\nvar DEFAULT_WEEK_NUM_FORMAT = createFormatter({ week: 'narrow' });\nvar TableCell = /** @class */ (function (_super) {\n    __extends(TableCell, _super);\n    function TableCell() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleRootEl = function (el) {\n            _this.rootEl = el;\n            setRef(_this.props.elRef, el);\n        };\n        _this.handleMoreLinkClick = function (ev) {\n            var props = _this.props;\n            if (props.onMoreClick) {\n                var allSegs = props.segsByEachCol;\n                var hiddenSegs = allSegs.filter(function (seg) { return props.segIsHidden[seg.eventRange.instance.instanceId]; });\n                props.onMoreClick({\n                    date: props.date,\n                    allSegs: allSegs,\n                    hiddenSegs: hiddenSegs,\n                    moreCnt: props.moreCnt,\n                    dayEl: _this.rootEl,\n                    ev: ev,\n                });\n            }\n        };\n        return _this;\n    }\n    TableCell.prototype.render = function () {\n        var _this = this;\n        var _a = this.context, options = _a.options, viewApi = _a.viewApi;\n        var props = this.props;\n        var date = props.date, dateProfile = props.dateProfile;\n        var hookProps = {\n            num: props.moreCnt,\n            text: props.buildMoreLinkText(props.moreCnt),\n            view: viewApi,\n        };\n        var navLinkAttrs = options.navLinks\n            ? { 'data-navlink': buildNavLinkData(date, 'week'), tabIndex: 0 }\n            : {};\n        return (createElement(DayCellRoot, { date: date, dateProfile: dateProfile, todayRange: props.todayRange, showDayNumber: props.showDayNumber, extraHookProps: props.extraHookProps, elRef: this.handleRootEl }, function (dayElRef, dayClassNames, rootDataAttrs, isDisabled) { return (createElement(\"td\", __assign({ ref: dayElRef, className: ['fc-daygrid-day'].concat(dayClassNames, props.extraClassNames || []).join(' ') }, rootDataAttrs, props.extraDataAttrs),\n            createElement(\"div\", { className: \"fc-daygrid-day-frame fc-scrollgrid-sync-inner\", ref: props.innerElRef /* different from hook system! RENAME */ },\n                props.showWeekNumber && (createElement(WeekNumberRoot, { date: date, defaultFormat: DEFAULT_WEEK_NUM_FORMAT }, function (weekElRef, weekClassNames, innerElRef, innerContent) { return (createElement(\"a\", __assign({ ref: weekElRef, className: ['fc-daygrid-week-number'].concat(weekClassNames).join(' ') }, navLinkAttrs), innerContent)); })),\n                !isDisabled && (createElement(TableCellTop, { date: date, dateProfile: dateProfile, showDayNumber: props.showDayNumber, forceDayTop: props.forceDayTop, todayRange: props.todayRange, extraHookProps: props.extraHookProps })),\n                createElement(\"div\", { className: \"fc-daygrid-day-events\", ref: props.fgContentElRef, style: { paddingBottom: props.fgPaddingBottom } },\n                    props.fgContent,\n                    Boolean(props.moreCnt) && (createElement(\"div\", { className: \"fc-daygrid-day-bottom\", style: { marginTop: props.moreMarginTop } },\n                        createElement(RenderHook, { hookProps: hookProps, classNames: options.moreLinkClassNames, content: options.moreLinkContent, defaultContent: renderMoreLinkInner, didMount: options.moreLinkDidMount, willUnmount: options.moreLinkWillUnmount }, function (rootElRef, classNames, innerElRef, innerContent) { return (createElement(\"a\", { ref: rootElRef, className: ['fc-daygrid-more-link'].concat(classNames).join(' '), onClick: _this.handleMoreLinkClick }, innerContent)); })))),\n                createElement(\"div\", { className: \"fc-daygrid-day-bg\" }, props.bgContent)))); }));\n    };\n    return TableCell;\n}(DateComponent));\nTableCell.addPropsEquality({\n    onMoreClick: true,\n});\nfunction renderMoreLinkInner(props) {\n    return props.text;\n}\n\nvar DEFAULT_TABLE_EVENT_TIME_FORMAT = createFormatter({\n    hour: 'numeric',\n    minute: '2-digit',\n    omitZeroMinute: true,\n    meridiem: 'narrow',\n});\nfunction hasListItemDisplay(seg) {\n    var display = seg.eventRange.ui.display;\n    return display === 'list-item' || (display === 'auto' &&\n        !seg.eventRange.def.allDay &&\n        seg.firstCol === seg.lastCol && // can't be multi-day\n        seg.isStart && // \"\n        seg.isEnd // \"\n    );\n}\n\nvar TableListItemEvent = /** @class */ (function (_super) {\n    __extends(TableListItemEvent, _super);\n    function TableListItemEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableListItemEvent.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        var timeFormat = context.options.eventTimeFormat || DEFAULT_TABLE_EVENT_TIME_FORMAT;\n        var timeText = buildSegTimeText(props.seg, timeFormat, context, true, props.defaultDisplayEventEnd);\n        return (createElement(EventRoot, { seg: props.seg, timeText: timeText, defaultContent: renderInnerContent, isDragging: props.isDragging, isResizing: false, isDateSelecting: false, isSelected: props.isSelected, isPast: props.isPast, isFuture: props.isFuture, isToday: props.isToday }, function (rootElRef, classNames, innerElRef, innerContent) { return ( // we don't use styles!\n        createElement(\"a\", __assign({ className: ['fc-daygrid-event', 'fc-daygrid-dot-event'].concat(classNames).join(' '), ref: rootElRef }, getSegAnchorAttrs(props.seg)), innerContent)); }));\n    };\n    return TableListItemEvent;\n}(BaseComponent));\nfunction renderInnerContent(innerProps) {\n    return (createElement(Fragment, null,\n        createElement(\"div\", { className: \"fc-daygrid-event-dot\", style: { borderColor: innerProps.borderColor || innerProps.backgroundColor } }),\n        innerProps.timeText && (createElement(\"div\", { className: \"fc-event-time\" }, innerProps.timeText)),\n        createElement(\"div\", { className: \"fc-event-title\" }, innerProps.event.title || createElement(Fragment, null, \"\\u00A0\"))));\n}\nfunction getSegAnchorAttrs(seg) {\n    var url = seg.eventRange.def.url;\n    return url ? { href: url } : {};\n}\n\nvar TableBlockEvent = /** @class */ (function (_super) {\n    __extends(TableBlockEvent, _super);\n    function TableBlockEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableBlockEvent.prototype.render = function () {\n        var props = this.props;\n        return (createElement(StandardEvent, __assign({}, props, { extraClassNames: ['fc-daygrid-event', 'fc-daygrid-block-event', 'fc-h-event'], defaultTimeFormat: DEFAULT_TABLE_EVENT_TIME_FORMAT, defaultDisplayEventEnd: props.defaultDisplayEventEnd, disableResizing: !props.seg.eventRange.def.allDay })));\n    };\n    return TableBlockEvent;\n}(BaseComponent));\n\nfunction computeFgSegPlacement(// for one row. TODO: print mode?\ncellModels, segs, dayMaxEvents, dayMaxEventRows, eventHeights, maxContentHeight, colCnt, eventOrderSpecs) {\n    var colPlacements = []; // if event spans multiple cols, its present in each col\n    var moreCnts = []; // by-col\n    var segIsHidden = {};\n    var segTops = {}; // always populated for each seg\n    var segMarginTops = {}; // simetimes populated for each seg\n    var moreTops = {};\n    var paddingBottoms = {}; // for each cell's inner-wrapper div\n    for (var i = 0; i < colCnt; i += 1) {\n        colPlacements.push([]);\n        moreCnts.push(0);\n    }\n    segs = sortEventSegs(segs, eventOrderSpecs);\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        var instanceId = seg.eventRange.instance.instanceId;\n        var eventHeight = eventHeights[instanceId + ':' + seg.firstCol];\n        placeSeg(seg, eventHeight || 0); // will keep colPlacements sorted by top\n    }\n    if (dayMaxEvents === true || dayMaxEventRows === true) {\n        limitByMaxHeight(moreCnts, segIsHidden, colPlacements, maxContentHeight); // populates moreCnts/segIsHidden\n    }\n    else if (typeof dayMaxEvents === 'number') {\n        limitByMaxEvents(moreCnts, segIsHidden, colPlacements, dayMaxEvents); // populates moreCnts/segIsHidden\n    }\n    else if (typeof dayMaxEventRows === 'number') {\n        limitByMaxRows(moreCnts, segIsHidden, colPlacements, dayMaxEventRows); // populates moreCnts/segIsHidden\n    }\n    // computes segTops/segMarginTops/moreTops/paddingBottoms\n    for (var col = 0; col < colCnt; col += 1) {\n        var placements = colPlacements[col];\n        var currentNonAbsBottom = 0;\n        var currentAbsHeight = 0;\n        for (var _a = 0, placements_1 = placements; _a < placements_1.length; _a++) {\n            var placement = placements_1[_a];\n            var seg = placement.seg;\n            if (!segIsHidden[seg.eventRange.instance.instanceId]) {\n                segTops[seg.eventRange.instance.instanceId] = placement.top; // from top of container\n                if (seg.firstCol === seg.lastCol && seg.isStart && seg.isEnd) { // TODO: simpler way? NOT DRY\n                    segMarginTops[seg.eventRange.instance.instanceId] =\n                        placement.top - currentNonAbsBottom; // from previous seg bottom\n                    currentAbsHeight = 0;\n                    currentNonAbsBottom = placement.bottom;\n                }\n                else { // multi-col event, abs positioned\n                    currentAbsHeight = placement.bottom - currentNonAbsBottom;\n                }\n            }\n        }\n        if (currentAbsHeight) {\n            if (moreCnts[col]) {\n                moreTops[col] = currentAbsHeight;\n            }\n            else {\n                paddingBottoms[col] = currentAbsHeight;\n            }\n        }\n    }\n    function placeSeg(seg, segHeight) {\n        if (!tryPlaceSegAt(seg, segHeight, 0)) {\n            for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n                for (var _i = 0, _a = colPlacements[col]; _i < _a.length; _i++) { // will repeat multi-day segs!!!!!!! bad!!!!!!\n                    var placement = _a[_i];\n                    if (tryPlaceSegAt(seg, segHeight, placement.bottom)) {\n                        return;\n                    }\n                }\n            }\n        }\n    }\n    function tryPlaceSegAt(seg, segHeight, top) {\n        if (canPlaceSegAt(seg, segHeight, top)) {\n            for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n                var placements = colPlacements[col];\n                var insertionIndex = 0;\n                while (insertionIndex < placements.length &&\n                    top >= placements[insertionIndex].top) {\n                    insertionIndex += 1;\n                }\n                placements.splice(insertionIndex, 0, {\n                    seg: seg,\n                    top: top,\n                    bottom: top + segHeight,\n                });\n            }\n            return true;\n        }\n        return false;\n    }\n    function canPlaceSegAt(seg, segHeight, top) {\n        for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n            for (var _i = 0, _a = colPlacements[col]; _i < _a.length; _i++) {\n                var placement = _a[_i];\n                if (top < placement.bottom && top + segHeight > placement.top) { // collide?\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    // what does this do!?\n    for (var instanceIdAndFirstCol in eventHeights) {\n        if (!eventHeights[instanceIdAndFirstCol]) {\n            segIsHidden[instanceIdAndFirstCol.split(':')[0]] = true;\n        }\n    }\n    var segsByFirstCol = colPlacements.map(extractFirstColSegs); // operates on the sorted cols\n    var segsByEachCol = colPlacements.map(function (placements, col) {\n        var segsForCols = extractAllColSegs(placements);\n        segsForCols = resliceDaySegs(segsForCols, cellModels[col].date, col);\n        return segsForCols;\n    });\n    return {\n        segsByFirstCol: segsByFirstCol,\n        segsByEachCol: segsByEachCol,\n        segIsHidden: segIsHidden,\n        segTops: segTops,\n        segMarginTops: segMarginTops,\n        moreCnts: moreCnts,\n        moreTops: moreTops,\n        paddingBottoms: paddingBottoms,\n    };\n}\nfunction extractFirstColSegs(oneColPlacements, col) {\n    var segs = [];\n    for (var _i = 0, oneColPlacements_1 = oneColPlacements; _i < oneColPlacements_1.length; _i++) {\n        var placement = oneColPlacements_1[_i];\n        if (placement.seg.firstCol === col) {\n            segs.push(placement.seg);\n        }\n    }\n    return segs;\n}\nfunction extractAllColSegs(oneColPlacements) {\n    var segs = [];\n    for (var _i = 0, oneColPlacements_2 = oneColPlacements; _i < oneColPlacements_2.length; _i++) {\n        var placement = oneColPlacements_2[_i];\n        segs.push(placement.seg);\n    }\n    return segs;\n}\nfunction limitByMaxHeight(hiddenCnts, segIsHidden, colPlacements, maxContentHeight) {\n    limitEvents(hiddenCnts, segIsHidden, colPlacements, true, function (placement) { return placement.bottom <= maxContentHeight; });\n}\nfunction limitByMaxEvents(hiddenCnts, segIsHidden, colPlacements, dayMaxEvents) {\n    limitEvents(hiddenCnts, segIsHidden, colPlacements, false, function (placement, levelIndex) { return levelIndex < dayMaxEvents; });\n}\nfunction limitByMaxRows(hiddenCnts, segIsHidden, colPlacements, dayMaxEventRows) {\n    limitEvents(hiddenCnts, segIsHidden, colPlacements, true, function (placement, levelIndex) { return levelIndex < dayMaxEventRows; });\n}\n/*\npopulates the given hiddenCnts/segIsHidden, which are supplied empty.\nTODO: return them instead\n*/\nfunction limitEvents(hiddenCnts, segIsHidden, colPlacements, _moreLinkConsumesLevel, isPlacementInBounds) {\n    var colCnt = hiddenCnts.length;\n    var segIsVisible = {}; // TODO: instead, use segIsHidden with true/false?\n    var visibleColPlacements = []; // will mirror colPlacements\n    for (var col = 0; col < colCnt; col += 1) {\n        visibleColPlacements.push([]);\n    }\n    for (var col = 0; col < colCnt; col += 1) {\n        var placements = colPlacements[col];\n        var level = 0;\n        for (var _i = 0, placements_2 = placements; _i < placements_2.length; _i++) {\n            var placement = placements_2[_i];\n            if (isPlacementInBounds(placement, level)) {\n                recordVisible(placement);\n            }\n            else {\n                recordHidden(placement, level, _moreLinkConsumesLevel);\n            }\n            // only considered a level if the seg had height\n            if (placement.top !== placement.bottom) {\n                level += 1;\n            }\n        }\n    }\n    function recordVisible(placement) {\n        var seg = placement.seg;\n        var instanceId = seg.eventRange.instance.instanceId;\n        if (!segIsVisible[instanceId]) {\n            segIsVisible[instanceId] = true;\n            for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n                var destPlacements = visibleColPlacements[col];\n                var newPosition = 0;\n                // insert while keeping top sorted in each column\n                while (newPosition < destPlacements.length &&\n                    placement.top >= destPlacements[newPosition].top) {\n                    newPosition += 1;\n                }\n                destPlacements.splice(newPosition, 0, placement);\n            }\n        }\n    }\n    function recordHidden(placement, currentLevel, moreLinkConsumesLevel) {\n        var seg = placement.seg;\n        var instanceId = seg.eventRange.instance.instanceId;\n        if (!segIsHidden[instanceId]) {\n            segIsHidden[instanceId] = true;\n            for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n                hiddenCnts[col] += 1;\n                var hiddenCnt = hiddenCnts[col];\n                if (moreLinkConsumesLevel && hiddenCnt === 1 && currentLevel > 0) {\n                    var doomedLevel = currentLevel - 1;\n                    while (visibleColPlacements[col].length > doomedLevel) {\n                        recordHidden(visibleColPlacements[col].pop(), // removes\n                        visibleColPlacements[col].length, // will execute after the pop. will be the index of the removed placement\n                        false);\n                    }\n                }\n            }\n        }\n    }\n}\n// Given the events within an array of segment objects, reslice them to be in a single day\nfunction resliceDaySegs(segs, dayDate, colIndex) {\n    var dayStart = dayDate;\n    var dayEnd = addDays(dayStart, 1);\n    var dayRange = { start: dayStart, end: dayEnd };\n    var newSegs = [];\n    for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n        var seg = segs_2[_i];\n        var eventRange = seg.eventRange;\n        var origRange = eventRange.range;\n        var slicedRange = intersectRanges(origRange, dayRange);\n        if (slicedRange) {\n            newSegs.push(__assign(__assign({}, seg), { firstCol: colIndex, lastCol: colIndex, eventRange: {\n                    def: eventRange.def,\n                    ui: __assign(__assign({}, eventRange.ui), { durationEditable: false }),\n                    instance: eventRange.instance,\n                    range: slicedRange,\n                }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() }));\n        }\n    }\n    return newSegs;\n}\n\nvar TableRow = /** @class */ (function (_super) {\n    __extends(TableRow, _super);\n    function TableRow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.cellElRefs = new RefMap(); // the <td>\n        _this.frameElRefs = new RefMap(); // the fc-daygrid-day-frame\n        _this.fgElRefs = new RefMap(); // the fc-daygrid-day-events\n        _this.segHarnessRefs = new RefMap(); // indexed by \"instanceId:firstCol\"\n        _this.rootElRef = createRef();\n        _this.state = {\n            framePositions: null,\n            maxContentHeight: null,\n            segHeights: {},\n        };\n        return _this;\n    }\n    TableRow.prototype.render = function () {\n        var _this = this;\n        var _a = this, props = _a.props, state = _a.state, context = _a.context;\n        var colCnt = props.cells.length;\n        var businessHoursByCol = splitSegsByFirstCol(props.businessHourSegs, colCnt);\n        var bgEventSegsByCol = splitSegsByFirstCol(props.bgEventSegs, colCnt);\n        var highlightSegsByCol = splitSegsByFirstCol(this.getHighlightSegs(), colCnt);\n        var mirrorSegsByCol = splitSegsByFirstCol(this.getMirrorSegs(), colCnt);\n        var _b = computeFgSegPlacement(props.cells, props.fgEventSegs, props.dayMaxEvents, props.dayMaxEventRows, state.segHeights, state.maxContentHeight, colCnt, context.options.eventOrder), paddingBottoms = _b.paddingBottoms, segsByFirstCol = _b.segsByFirstCol, segsByEachCol = _b.segsByEachCol, segIsHidden = _b.segIsHidden, segTops = _b.segTops, segMarginTops = _b.segMarginTops, moreCnts = _b.moreCnts, moreTops = _b.moreTops;\n        var selectedInstanceHash = // TODO: messy way to compute this\n         (props.eventDrag && props.eventDrag.affectedInstances) ||\n            (props.eventResize && props.eventResize.affectedInstances) ||\n            {};\n        return (createElement(\"tr\", { ref: this.rootElRef },\n            props.renderIntro && props.renderIntro(),\n            props.cells.map(function (cell, col) {\n                var normalFgNodes = _this.renderFgSegs(segsByFirstCol[col], segIsHidden, segTops, segMarginTops, selectedInstanceHash, props.todayRange);\n                var mirrorFgNodes = _this.renderFgSegs(mirrorSegsByCol[col], {}, segTops, // use same tops as real rendering\n                {}, {}, props.todayRange, Boolean(props.eventDrag), Boolean(props.eventResize), false);\n                return (createElement(TableCell, { key: cell.key, elRef: _this.cellElRefs.createRef(cell.key), innerElRef: _this.frameElRefs.createRef(cell.key) /* FF <td> problem, but okay to use for left/right. TODO: rename prop */, dateProfile: props.dateProfile, date: cell.date, showDayNumber: props.showDayNumbers, showWeekNumber: props.showWeekNumbers && col === 0, forceDayTop: props.showWeekNumbers /* even displaying weeknum for row, not necessarily day */, todayRange: props.todayRange, extraHookProps: cell.extraHookProps, extraDataAttrs: cell.extraDataAttrs, extraClassNames: cell.extraClassNames, moreCnt: moreCnts[col], buildMoreLinkText: props.buildMoreLinkText, onMoreClick: function (arg) {\n                        props.onMoreClick(__assign(__assign({}, arg), { fromCol: col }));\n                    }, segIsHidden: segIsHidden, moreMarginTop: moreTops[col] /* rename */, segsByEachCol: segsByEachCol[col], fgPaddingBottom: paddingBottoms[col], fgContentElRef: _this.fgElRefs.createRef(cell.key), fgContent: ( // Fragment scopes the keys\n                    createElement(Fragment, null,\n                        createElement(Fragment, null, normalFgNodes),\n                        createElement(Fragment, null, mirrorFgNodes))), bgContent: ( // Fragment scopes the keys\n                    createElement(Fragment, null,\n                        _this.renderFillSegs(highlightSegsByCol[col], 'highlight'),\n                        _this.renderFillSegs(businessHoursByCol[col], 'non-business'),\n                        _this.renderFillSegs(bgEventSegsByCol[col], 'bg-event'))) }));\n            })));\n    };\n    TableRow.prototype.componentDidMount = function () {\n        this.updateSizing(true);\n    };\n    TableRow.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var currentProps = this.props;\n        this.updateSizing(!isPropsEqual(prevProps, currentProps));\n    };\n    TableRow.prototype.getHighlightSegs = function () {\n        var props = this.props;\n        if (props.eventDrag && props.eventDrag.segs.length) { // messy check\n            return props.eventDrag.segs;\n        }\n        if (props.eventResize && props.eventResize.segs.length) { // messy check\n            return props.eventResize.segs;\n        }\n        return props.dateSelectionSegs;\n    };\n    TableRow.prototype.getMirrorSegs = function () {\n        var props = this.props;\n        if (props.eventResize && props.eventResize.segs.length) { // messy check\n            return props.eventResize.segs;\n        }\n        return [];\n    };\n    TableRow.prototype.renderFgSegs = function (segs, segIsHidden, // does NOT mean display:hidden\n    segTops, segMarginTops, selectedInstanceHash, todayRange, isDragging, isResizing, isDateSelecting) {\n        var context = this.context;\n        var eventSelection = this.props.eventSelection;\n        var framePositions = this.state.framePositions;\n        var defaultDisplayEventEnd = this.props.cells.length === 1; // colCnt === 1\n        var nodes = [];\n        if (framePositions) {\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                var instanceId = seg.eventRange.instance.instanceId;\n                var isMirror = isDragging || isResizing || isDateSelecting;\n                var isSelected = selectedInstanceHash[instanceId];\n                var isInvisible = segIsHidden[instanceId] || isSelected;\n                // TODO: simpler way? NOT DRY\n                var isAbsolute = segIsHidden[instanceId] || isMirror || seg.firstCol !== seg.lastCol || !seg.isStart || !seg.isEnd;\n                var marginTop = void 0;\n                var top_1 = void 0;\n                var left = void 0;\n                var right = void 0;\n                if (isAbsolute) {\n                    top_1 = segTops[instanceId];\n                    if (context.isRtl) {\n                        right = 0;\n                        left = framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol];\n                    }\n                    else {\n                        left = 0;\n                        right = framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol];\n                    }\n                }\n                else {\n                    marginTop = segMarginTops[instanceId];\n                }\n                /*\n                known bug: events that are force to be list-item but span multiple days still take up space in later columns\n                */\n                nodes.push(createElement(\"div\", { className: 'fc-daygrid-event-harness' + (isAbsolute ? ' fc-daygrid-event-harness-abs' : ''), key: instanceId, \n                    // in print mode when in mult cols, could collide\n                    ref: isMirror ? null : this.segHarnessRefs.createRef(instanceId + ':' + seg.firstCol), style: {\n                        visibility: isInvisible ? 'hidden' : '',\n                        marginTop: marginTop || '',\n                        top: top_1 || '',\n                        left: left || '',\n                        right: right || '',\n                    } }, hasListItemDisplay(seg) ? (createElement(TableListItemEvent, __assign({ seg: seg, isDragging: isDragging, isSelected: instanceId === eventSelection, defaultDisplayEventEnd: defaultDisplayEventEnd }, getSegMeta(seg, todayRange)))) : (createElement(TableBlockEvent, __assign({ seg: seg, isDragging: isDragging, isResizing: isResizing, isDateSelecting: isDateSelecting, isSelected: instanceId === eventSelection, defaultDisplayEventEnd: defaultDisplayEventEnd }, getSegMeta(seg, todayRange))))));\n            }\n        }\n        return nodes;\n    };\n    TableRow.prototype.renderFillSegs = function (segs, fillType) {\n        var isRtl = this.context.isRtl;\n        var todayRange = this.props.todayRange;\n        var framePositions = this.state.framePositions;\n        var nodes = [];\n        if (framePositions) {\n            for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n                var seg = segs_2[_i];\n                var leftRightCss = isRtl ? {\n                    right: 0,\n                    left: framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol],\n                } : {\n                    left: 0,\n                    right: framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol],\n                };\n                nodes.push(createElement(\"div\", { key: buildEventRangeKey(seg.eventRange), className: \"fc-daygrid-bg-harness\", style: leftRightCss }, fillType === 'bg-event' ?\n                    createElement(BgEvent, __assign({ seg: seg }, getSegMeta(seg, todayRange))) :\n                    renderFill(fillType)));\n            }\n        }\n        return createElement.apply(void 0, __spreadArrays([Fragment, {}], nodes));\n    };\n    TableRow.prototype.updateSizing = function (isExternalSizingChange) {\n        var _a = this, props = _a.props, frameElRefs = _a.frameElRefs;\n        if (props.clientWidth !== null) { // positioning ready?\n            if (isExternalSizingChange) {\n                var frameEls = props.cells.map(function (cell) { return frameElRefs.currentMap[cell.key]; });\n                if (frameEls.length) {\n                    var originEl = this.rootElRef.current;\n                    this.setState({\n                        framePositions: new PositionCache(originEl, frameEls, true, // isHorizontal\n                        false),\n                    });\n                }\n            }\n            var limitByContentHeight = props.dayMaxEvents === true || props.dayMaxEventRows === true;\n            this.setState({\n                segHeights: this.computeSegHeights(),\n                maxContentHeight: limitByContentHeight ? this.computeMaxContentHeight() : null,\n            });\n        }\n    };\n    TableRow.prototype.computeSegHeights = function () {\n        return mapHash(this.segHarnessRefs.currentMap, function (eventHarnessEl) { return (eventHarnessEl.getBoundingClientRect().height); });\n    };\n    TableRow.prototype.computeMaxContentHeight = function () {\n        var firstKey = this.props.cells[0].key;\n        var cellEl = this.cellElRefs.currentMap[firstKey];\n        var fcContainerEl = this.fgElRefs.currentMap[firstKey];\n        return cellEl.getBoundingClientRect().bottom - fcContainerEl.getBoundingClientRect().top;\n    };\n    TableRow.prototype.getCellEls = function () {\n        var elMap = this.cellElRefs.currentMap;\n        return this.props.cells.map(function (cell) { return elMap[cell.key]; });\n    };\n    return TableRow;\n}(DateComponent));\nTableRow.addPropsEquality({\n    onMoreClick: true,\n});\nTableRow.addStateEquality({\n    segHeights: isPropsEqual,\n});\n\nvar PADDING_FROM_VIEWPORT = 10;\nvar SCROLL_DEBOUNCE = 10;\nvar Popover = /** @class */ (function (_super) {\n    __extends(Popover, _super);\n    function Popover() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.repositioner = new DelayedRunner(_this.updateSize.bind(_this));\n        _this.handleRootEl = function (el) {\n            _this.rootEl = el;\n            if (_this.props.elRef) {\n                setRef(_this.props.elRef, el);\n            }\n        };\n        // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n        _this.handleDocumentMousedown = function (ev) {\n            var onClose = _this.props.onClose;\n            // only hide the popover if the click happened outside the popover\n            if (onClose && !_this.rootEl.contains(ev.target)) {\n                onClose();\n            }\n        };\n        _this.handleDocumentScroll = function () {\n            _this.repositioner.request(SCROLL_DEBOUNCE);\n        };\n        _this.handleCloseClick = function () {\n            var onClose = _this.props.onClose;\n            if (onClose) {\n                onClose();\n            }\n        };\n        return _this;\n    }\n    Popover.prototype.render = function () {\n        var theme = this.context.theme;\n        var props = this.props;\n        var classNames = [\n            'fc-popover',\n            theme.getClass('popover'),\n        ].concat(props.extraClassNames || []);\n        return (createElement(\"div\", __assign({ className: classNames.join(' ') }, props.extraAttrs, { ref: this.handleRootEl }),\n            createElement(\"div\", { className: 'fc-popover-header ' + theme.getClass('popoverHeader') },\n                createElement(\"span\", { className: \"fc-popover-title\" }, props.title),\n                createElement(\"span\", { className: 'fc-popover-close ' + theme.getIconClass('close'), onClick: this.handleCloseClick })),\n            createElement(\"div\", { className: 'fc-popover-body ' + theme.getClass('popoverContent') }, props.children)));\n    };\n    Popover.prototype.componentDidMount = function () {\n        document.addEventListener('mousedown', this.handleDocumentMousedown);\n        document.addEventListener('scroll', this.handleDocumentScroll);\n        this.updateSize();\n    };\n    Popover.prototype.componentWillUnmount = function () {\n        document.removeEventListener('mousedown', this.handleDocumentMousedown);\n        document.removeEventListener('scroll', this.handleDocumentScroll);\n    };\n    // TODO: adjust on window resize\n    /*\n    NOTE: the popover is position:fixed, so coordinates are relative to the viewport\n    NOTE: the PARENT calls this as well, on window resize. we would have wanted to use the repositioner,\n          but need to ensure that all other components have updated size first (for alignmentEl)\n    */\n    Popover.prototype.updateSize = function () {\n        var _a = this.props, alignmentEl = _a.alignmentEl, topAlignmentEl = _a.topAlignmentEl;\n        var rootEl = this.rootEl;\n        if (!rootEl) {\n            return; // not sure why this was null, but we shouldn't let external components call updateSize() anyway\n        }\n        var dims = rootEl.getBoundingClientRect(); // only used for width,height\n        var alignment = alignmentEl.getBoundingClientRect();\n        var top = topAlignmentEl ? topAlignmentEl.getBoundingClientRect().top : alignment.top;\n        top = Math.min(top, window.innerHeight - dims.height - PADDING_FROM_VIEWPORT);\n        top = Math.max(top, PADDING_FROM_VIEWPORT);\n        var left;\n        if (this.context.isRtl) {\n            left = alignment.right - dims.width;\n        }\n        else {\n            left = alignment.left;\n        }\n        left = Math.min(left, window.innerWidth - dims.width - PADDING_FROM_VIEWPORT);\n        left = Math.max(left, PADDING_FROM_VIEWPORT);\n        applyStyle(rootEl, { top: top, left: left });\n    };\n    return Popover;\n}(BaseComponent));\n\nvar MorePopover = /** @class */ (function (_super) {\n    __extends(MorePopover, _super);\n    function MorePopover() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.rootElRef = createRef();\n        return _this;\n    }\n    MorePopover.prototype.render = function () {\n        var _a = this.context, options = _a.options, dateEnv = _a.dateEnv;\n        var props = this.props;\n        var date = props.date, hiddenInstances = props.hiddenInstances, todayRange = props.todayRange, dateProfile = props.dateProfile, selectedInstanceId = props.selectedInstanceId;\n        var title = dateEnv.format(date, options.dayPopoverFormat);\n        return (createElement(DayCellRoot, { date: date, dateProfile: dateProfile, todayRange: todayRange, elRef: this.rootElRef }, function (rootElRef, dayClassNames, dataAttrs) { return (createElement(Popover, { elRef: rootElRef, title: title, extraClassNames: ['fc-more-popover'].concat(dayClassNames), extraAttrs: dataAttrs, onClose: props.onCloseClick, alignmentEl: props.alignmentEl, topAlignmentEl: props.topAlignmentEl },\n            createElement(DayCellContent, { date: date, dateProfile: dateProfile, todayRange: todayRange }, function (innerElRef, innerContent) { return (innerContent &&\n                createElement(\"div\", { className: \"fc-more-popover-misc\", ref: innerElRef }, innerContent)); }),\n            props.segs.map(function (seg) {\n                var instanceId = seg.eventRange.instance.instanceId;\n                return (createElement(\"div\", { className: \"fc-daygrid-event-harness\", key: instanceId, style: {\n                        visibility: hiddenInstances[instanceId] ? 'hidden' : '',\n                    } }, hasListItemDisplay(seg) ? (createElement(TableListItemEvent, __assign({ seg: seg, isDragging: false, isSelected: instanceId === selectedInstanceId, defaultDisplayEventEnd: false }, getSegMeta(seg, todayRange)))) : (createElement(TableBlockEvent, __assign({ seg: seg, isDragging: false, isResizing: false, isDateSelecting: false, isSelected: instanceId === selectedInstanceId, defaultDisplayEventEnd: false }, getSegMeta(seg, todayRange))))));\n            }))); }));\n    };\n    MorePopover.prototype.positionToHit = function (positionLeft, positionTop, originEl) {\n        var rootEl = this.rootElRef.current;\n        if (!originEl || !rootEl) { // why?\n            return null;\n        }\n        var originRect = originEl.getBoundingClientRect();\n        var elRect = rootEl.getBoundingClientRect();\n        var newOriginLeft = elRect.left - originRect.left;\n        var newOriginTop = elRect.top - originRect.top;\n        var localLeft = positionLeft - newOriginLeft;\n        var localTop = positionTop - newOriginTop;\n        var date = this.props.date;\n        if ( // ugly way to detect intersection\n        localLeft >= 0 && localLeft < elRect.width &&\n            localTop >= 0 && localTop < elRect.height) {\n            return {\n                dateSpan: {\n                    allDay: true,\n                    range: { start: date, end: addDays(date, 1) },\n                },\n                dayEl: rootEl,\n                relativeRect: {\n                    left: newOriginLeft,\n                    top: newOriginTop,\n                    right: elRect.width,\n                    bottom: elRect.height,\n                },\n                layer: 1,\n            };\n        }\n        return null;\n    };\n    return MorePopover;\n}(DateComponent));\n\nvar Table = /** @class */ (function (_super) {\n    __extends(Table, _super);\n    function Table() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.splitBusinessHourSegs = memoize(splitSegsByRow);\n        _this.splitBgEventSegs = memoize(splitSegsByRow);\n        _this.splitFgEventSegs = memoize(splitSegsByRow);\n        _this.splitDateSelectionSegs = memoize(splitSegsByRow);\n        _this.splitEventDrag = memoize(splitInteractionByRow);\n        _this.splitEventResize = memoize(splitInteractionByRow);\n        _this.buildBuildMoreLinkText = memoize(buildBuildMoreLinkText);\n        _this.morePopoverRef = createRef();\n        _this.rowRefs = new RefMap();\n        _this.state = {\n            morePopoverState: null,\n        };\n        _this.handleRootEl = function (rootEl) {\n            _this.rootEl = rootEl;\n            setRef(_this.props.elRef, rootEl);\n        };\n        // TODO: bad names \"more link click\" versus \"more click\"\n        _this.handleMoreLinkClick = function (arg) {\n            var context = _this.context;\n            var dateEnv = context.dateEnv;\n            var clickOption = context.options.moreLinkClick;\n            function segForPublic(seg) {\n                var _a = seg.eventRange, def = _a.def, instance = _a.instance, range = _a.range;\n                return {\n                    event: new EventApi(context, def, instance),\n                    start: dateEnv.toDate(range.start),\n                    end: dateEnv.toDate(range.end),\n                    isStart: seg.isStart,\n                    isEnd: seg.isEnd,\n                };\n            }\n            if (typeof clickOption === 'function') {\n                clickOption = clickOption({\n                    date: dateEnv.toDate(arg.date),\n                    allDay: true,\n                    allSegs: arg.allSegs.map(segForPublic),\n                    hiddenSegs: arg.hiddenSegs.map(segForPublic),\n                    jsEvent: arg.ev,\n                    view: context.viewApi,\n                }); // hack to handle void\n            }\n            if (!clickOption || clickOption === 'popover') {\n                _this.setState({\n                    morePopoverState: __assign(__assign({}, arg), { currentFgEventSegs: _this.props.fgEventSegs, fromRow: arg.fromRow, fromCol: arg.fromCol }),\n                });\n            }\n            else if (typeof clickOption === 'string') { // a view name\n                context.calendarApi.zoomTo(arg.date, clickOption);\n            }\n        };\n        _this.handleMorePopoverClose = function () {\n            _this.setState({\n                morePopoverState: null,\n            });\n        };\n        return _this;\n    }\n    Table.prototype.render = function () {\n        var _this = this;\n        var props = this.props;\n        var dateProfile = props.dateProfile, dayMaxEventRows = props.dayMaxEventRows, dayMaxEvents = props.dayMaxEvents, expandRows = props.expandRows;\n        var morePopoverState = this.state.morePopoverState;\n        var rowCnt = props.cells.length;\n        var businessHourSegsByRow = this.splitBusinessHourSegs(props.businessHourSegs, rowCnt);\n        var bgEventSegsByRow = this.splitBgEventSegs(props.bgEventSegs, rowCnt);\n        var fgEventSegsByRow = this.splitFgEventSegs(props.fgEventSegs, rowCnt);\n        var dateSelectionSegsByRow = this.splitDateSelectionSegs(props.dateSelectionSegs, rowCnt);\n        var eventDragByRow = this.splitEventDrag(props.eventDrag, rowCnt);\n        var eventResizeByRow = this.splitEventResize(props.eventResize, rowCnt);\n        var buildMoreLinkText = this.buildBuildMoreLinkText(this.context.options.moreLinkText);\n        var limitViaBalanced = dayMaxEvents === true || dayMaxEventRows === true;\n        // if rows can't expand to fill fixed height, can't do balanced-height event limit\n        // TODO: best place to normalize these options?\n        if (limitViaBalanced && !expandRows) {\n            limitViaBalanced = false;\n            dayMaxEventRows = null;\n            dayMaxEvents = null;\n        }\n        var classNames = [\n            'fc-daygrid-body',\n            limitViaBalanced ? 'fc-daygrid-body-balanced' : 'fc-daygrid-body-unbalanced',\n            expandRows ? '' : 'fc-daygrid-body-natural',\n        ];\n        return (createElement(\"div\", { className: classNames.join(' '), ref: this.handleRootEl, style: {\n                // these props are important to give this wrapper correct dimensions for interactions\n                // TODO: if we set it here, can we avoid giving to inner tables?\n                width: props.clientWidth,\n                minWidth: props.tableMinWidth,\n            } },\n            createElement(NowTimer, { unit: \"day\" }, function (nowDate, todayRange) { return (createElement(Fragment, null,\n                createElement(\"table\", { className: \"fc-scrollgrid-sync-table\", style: {\n                        width: props.clientWidth,\n                        minWidth: props.tableMinWidth,\n                        height: expandRows ? props.clientHeight : '',\n                    } },\n                    props.colGroupNode,\n                    createElement(\"tbody\", null, props.cells.map(function (cells, row) { return (createElement(TableRow, { ref: _this.rowRefs.createRef(row), key: cells.length\n                            ? cells[0].date.toISOString() /* best? or put key on cell? or use diff formatter? */\n                            : row // in case there are no cells (like when resource view is loading)\n                        , showDayNumbers: rowCnt > 1, showWeekNumbers: props.showWeekNumbers, todayRange: todayRange, dateProfile: dateProfile, cells: cells, renderIntro: props.renderRowIntro, businessHourSegs: businessHourSegsByRow[row], eventSelection: props.eventSelection, bgEventSegs: bgEventSegsByRow[row].filter(isSegAllDay) /* hack */, fgEventSegs: fgEventSegsByRow[row], dateSelectionSegs: dateSelectionSegsByRow[row], eventDrag: eventDragByRow[row], eventResize: eventResizeByRow[row], dayMaxEvents: dayMaxEvents, dayMaxEventRows: dayMaxEventRows, clientWidth: props.clientWidth, clientHeight: props.clientHeight, buildMoreLinkText: buildMoreLinkText, onMoreClick: function (arg) {\n                            _this.handleMoreLinkClick(__assign(__assign({}, arg), { fromRow: row }));\n                        } })); }))),\n                (!props.forPrint && morePopoverState && morePopoverState.currentFgEventSegs === props.fgEventSegs) && (createElement(MorePopover, { ref: _this.morePopoverRef, date: morePopoverState.date, dateProfile: dateProfile, segs: morePopoverState.allSegs, alignmentEl: morePopoverState.dayEl, topAlignmentEl: rowCnt === 1 ? props.headerAlignElRef.current : null, onCloseClick: _this.handleMorePopoverClose, selectedInstanceId: props.eventSelection, hiddenInstances: // yuck\n                    (props.eventDrag ? props.eventDrag.affectedInstances : null) ||\n                        (props.eventResize ? props.eventResize.affectedInstances : null) ||\n                        {}, todayRange: todayRange })))); })));\n    };\n    // Hit System\n    // ----------------------------------------------------------------------------------------------------\n    Table.prototype.prepareHits = function () {\n        this.rowPositions = new PositionCache(this.rootEl, this.rowRefs.collect().map(function (rowObj) { return rowObj.getCellEls()[0]; }), // first cell el in each row. TODO: not optimal\n        false, true);\n        this.colPositions = new PositionCache(this.rootEl, this.rowRefs.currentMap[0].getCellEls(), // cell els in first row\n        true, // horizontal\n        false);\n    };\n    Table.prototype.positionToHit = function (leftPosition, topPosition) {\n        var morePopover = this.morePopoverRef.current;\n        var morePopoverHit = morePopover ? morePopover.positionToHit(leftPosition, topPosition, this.rootEl) : null;\n        var morePopoverState = this.state.morePopoverState;\n        if (morePopoverHit) {\n            return __assign({ row: morePopoverState.fromRow, col: morePopoverState.fromCol }, morePopoverHit);\n        }\n        var _a = this, colPositions = _a.colPositions, rowPositions = _a.rowPositions;\n        var col = colPositions.leftToIndex(leftPosition);\n        var row = rowPositions.topToIndex(topPosition);\n        if (row != null && col != null) {\n            return {\n                row: row,\n                col: col,\n                dateSpan: {\n                    range: this.getCellRange(row, col),\n                    allDay: true,\n                },\n                dayEl: this.getCellEl(row, col),\n                relativeRect: {\n                    left: colPositions.lefts[col],\n                    right: colPositions.rights[col],\n                    top: rowPositions.tops[row],\n                    bottom: rowPositions.bottoms[row],\n                },\n            };\n        }\n        return null;\n    };\n    Table.prototype.getCellEl = function (row, col) {\n        return this.rowRefs.currentMap[row].getCellEls()[col]; // TODO: not optimal\n    };\n    Table.prototype.getCellRange = function (row, col) {\n        var start = this.props.cells[row][col].date;\n        var end = addDays(start, 1);\n        return { start: start, end: end };\n    };\n    return Table;\n}(DateComponent));\nfunction buildBuildMoreLinkText(moreLinkTextInput) {\n    if (typeof moreLinkTextInput === 'function') {\n        return moreLinkTextInput;\n    }\n    return function (num) { return \"+\" + num + \" \" + moreLinkTextInput; };\n}\nfunction isSegAllDay(seg) {\n    return seg.eventRange.def.allDay;\n}\n\nvar DayTableSlicer = /** @class */ (function (_super) {\n    __extends(DayTableSlicer, _super);\n    function DayTableSlicer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.forceDayIfListItem = true;\n        return _this;\n    }\n    DayTableSlicer.prototype.sliceRange = function (dateRange, dayTableModel) {\n        return dayTableModel.sliceRange(dateRange);\n    };\n    return DayTableSlicer;\n}(Slicer));\n\nvar DayTable = /** @class */ (function (_super) {\n    __extends(DayTable, _super);\n    function DayTable() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.slicer = new DayTableSlicer();\n        _this.tableRef = createRef();\n        _this.handleRootEl = function (rootEl) {\n            if (rootEl) {\n                _this.context.registerInteractiveComponent(_this, { el: rootEl });\n            }\n            else {\n                _this.context.unregisterInteractiveComponent(_this);\n            }\n        };\n        return _this;\n    }\n    DayTable.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        return (createElement(Table, __assign({ ref: this.tableRef, elRef: this.handleRootEl }, this.slicer.sliceProps(props, props.dateProfile, props.nextDayThreshold, context, props.dayTableModel), { dateProfile: props.dateProfile, cells: props.dayTableModel.cells, colGroupNode: props.colGroupNode, tableMinWidth: props.tableMinWidth, renderRowIntro: props.renderRowIntro, dayMaxEvents: props.dayMaxEvents, dayMaxEventRows: props.dayMaxEventRows, showWeekNumbers: props.showWeekNumbers, expandRows: props.expandRows, headerAlignElRef: props.headerAlignElRef, clientWidth: props.clientWidth, clientHeight: props.clientHeight, forPrint: props.forPrint })));\n    };\n    DayTable.prototype.prepareHits = function () {\n        this.tableRef.current.prepareHits();\n    };\n    DayTable.prototype.queryHit = function (positionLeft, positionTop) {\n        var rawHit = this.tableRef.current.positionToHit(positionLeft, positionTop);\n        if (rawHit) {\n            return {\n                component: this,\n                dateSpan: rawHit.dateSpan,\n                dayEl: rawHit.dayEl,\n                rect: {\n                    left: rawHit.relativeRect.left,\n                    right: rawHit.relativeRect.right,\n                    top: rawHit.relativeRect.top,\n                    bottom: rawHit.relativeRect.bottom,\n                },\n                layer: 0,\n            };\n        }\n        return null;\n    };\n    return DayTable;\n}(DateComponent));\n\nvar DayTableView = /** @class */ (function (_super) {\n    __extends(DayTableView, _super);\n    function DayTableView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildDayTableModel = memoize(buildDayTableModel);\n        _this.headerRef = createRef();\n        _this.tableRef = createRef();\n        return _this;\n    }\n    DayTableView.prototype.render = function () {\n        var _this = this;\n        var _a = this.context, options = _a.options, dateProfileGenerator = _a.dateProfileGenerator;\n        var props = this.props;\n        var dayTableModel = this.buildDayTableModel(props.dateProfile, dateProfileGenerator);\n        var headerContent = options.dayHeaders && (createElement(DayHeader, { ref: this.headerRef, dateProfile: props.dateProfile, dates: dayTableModel.headerDates, datesRepDistinctDays: dayTableModel.rowCnt === 1 }));\n        var bodyContent = function (contentArg) { return (createElement(DayTable, { ref: _this.tableRef, dateProfile: props.dateProfile, dayTableModel: dayTableModel, businessHours: props.businessHours, dateSelection: props.dateSelection, eventStore: props.eventStore, eventUiBases: props.eventUiBases, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, nextDayThreshold: options.nextDayThreshold, colGroupNode: contentArg.tableColGroupNode, tableMinWidth: contentArg.tableMinWidth, dayMaxEvents: options.dayMaxEvents, dayMaxEventRows: options.dayMaxEventRows, showWeekNumbers: options.weekNumbers, expandRows: !props.isHeightAuto, headerAlignElRef: _this.headerElRef, clientWidth: contentArg.clientWidth, clientHeight: contentArg.clientHeight, forPrint: props.forPrint })); };\n        return options.dayMinWidth\n            ? this.renderHScrollLayout(headerContent, bodyContent, dayTableModel.colCnt, options.dayMinWidth)\n            : this.renderSimpleLayout(headerContent, bodyContent);\n    };\n    return DayTableView;\n}(TableView));\nfunction buildDayTableModel(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeriesModel(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTableModel(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar TableDateProfileGenerator = /** @class */ (function (_super) {\n    __extends(TableDateProfileGenerator, _super);\n    function TableDateProfileGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Computes the date range that will be rendered.\n    TableDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        var dateEnv = this.props.dateEnv;\n        var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n        var start = renderRange.start;\n        var end = renderRange.end;\n        var endOfWeek;\n        // year and month views should be aligned with weeks. this is already done for week\n        if (/^(year|month)$/.test(currentRangeUnit)) {\n            start = dateEnv.startOfWeek(start);\n            // make end-of-week if not already\n            endOfWeek = dateEnv.startOfWeek(end);\n            if (endOfWeek.valueOf() !== end.valueOf()) {\n                end = addWeeks(endOfWeek, 1);\n            }\n        }\n        // ensure 6 weeks\n        if (this.props.monthMode &&\n            this.props.fixedWeekCount) {\n            var rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\n            diffWeeks(start, end));\n            end = addWeeks(end, 6 - rowCnt);\n        }\n        return { start: start, end: end };\n    };\n    return TableDateProfileGenerator;\n}(DateProfileGenerator));\n\nvar OPTION_REFINERS = {\n    moreLinkClick: identity,\n    moreLinkClassNames: identity,\n    moreLinkContent: identity,\n    moreLinkDidMount: identity,\n    moreLinkWillUnmount: identity,\n};\n\nvar main = createPlugin({\n    initialView: 'dayGridMonth',\n    optionRefiners: OPTION_REFINERS,\n    views: {\n        dayGrid: {\n            component: DayTableView,\n            dateProfileGeneratorClass: TableDateProfileGenerator,\n        },\n        dayGridDay: {\n            type: 'dayGrid',\n            duration: { days: 1 },\n        },\n        dayGridWeek: {\n            type: 'dayGrid',\n            duration: { weeks: 1 },\n        },\n        dayGridMonth: {\n            type: 'dayGrid',\n            duration: { months: 1 },\n            monthMode: true,\n            fixedWeekCount: true,\n        },\n    },\n});\n\nexport default main;\nexport { DayTableView as DayGridView, DayTable, DayTableSlicer, Table, TableView, buildDayTableModel };\n//# sourceMappingURL=main.js.map\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { routing } from './scheduler.routing';\nimport { FullCalendarModule } from '@fullcalendar/angular';\nimport dayGridWeek from '@fullcalendar/daygrid'; // a plugin\n\nFullCalendarModule.registerPlugins([ // register FullCalendar plugins\n  dayGridWeek\n]);\n\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule,\n    routing,\n    FullCalendarModule\n  ]\n})\nexport class SchedulerModule {\n\n}\n"]}